# 프로세스 vs. 스레드

- 프로세스: 메모리 상에서 실행 중인 프로그램
- 스레드: 프로세스 안에서 실행되는 작업의 단위, 프로세스마다 최소 한 개의 스레드 보유

***

프로세스는 Code, Data, Heap, Stack으로 주소 공간이 분리되어 있습니다.

- Code: 코드 자체를 구성하는 영역
- Data: 전역 변수, 정적 변수 등의 메모리를 구성하는 영역
- Heap: 동적 할당된 데이터를 관리하는 영역
- Stack: 지역 변수, 매개 변수, 반환 값 등을 관리하는 영역

스레드는 TCB(PC, Register), Stack(User, Kernel) 등을 따로 가지고 있음

***

프로세스는 자신만의 자원을 할당받지만, 스레드는 프로세스 내의 자원을 공유하는 차이가 존재

***
## 멀티 프로세스

하나의 프로그램을 여러 프로세스로 나누어 병렬적으로 작업을 처리하는 방법

- 장점
  - 독립적인 작업을 병렬적으로 수행하므로 효율적
  - 운영체제에서 메모리 침범 문제를 해결하므로 안정적
- 단점
  - 작업량이 많을수록 오버헤드가 발생
  - Context Switching으로 인한 성능 저하

***
## Context Switching

병렬 작업 시 프로세스의 상태를 저장하고 복원하는 작업
PCB를 사용해 프로세스의 상태를 저장하고, 운영체제는 PCB의 정보를 활용해 작업을 전환
***
## 멀티 스레드

하나의 프로세스를 여러 스레드로 나누어 병렬적으로 작업을 처리하는 방법

- 장점
  - 프로세스의 자원을 공유하므로 Switching에 대한 오버헤드가 비교적 적음
- 단점
  - 하나의 스레드가 데이터 공간을 망가뜨리면 모든 스레드가 작동되지 않으므로 안정적이지 않음
  - 이는 Critical Section 기법을 통해 대비

***
## 캐시 일관성 (멀티프로세스)
  - Non-Determinated 연산
  - 상호 배제 실패
***
## 프로세스는 스케줄링의 단위, 자원 소유권의 단위
  - 다른 프로세스와 자원을 공유하지 않음
***
## 멀티 스레드의 문제점
  - 교착 상태
***
## 스레드가 많으면 많을수록 좋은가?
  - 많아지면 Context Switching 비용이 증가해 효율이 떨어진다.
## iOS 개발에서 스레드를 지정할 수 없는가?
  - NSThread?
***
## 스레드의 상태?
- Running
- Ready
- Blocked
  - Suspended가 절대 있으면 안된다. (프로세스 수준에서 진행되어야 함)
***
## ULT vs. KLT
***
## 프로세스가 Suspended되면 스레드는 어떻게 될까요?
